:root{--bg1:#141821;--bg2:#0f1115;--accent:#c9732a;--accent-green:#28a745;--accent-red:#dc3545;--panel-bg:#0f1115;--panel-card:#161a22;--panel-border:#222630;--text:#e6e6e6;
  --bg1:#141821;
  --bg2:#0f1115;
  --accent:#c9732a;
  --accent-green:#28a745;
  --accent-red:#dc3545;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;overflow:hidden;background:#0f1115;color:var(--text);font-family:Inter,Arial,sans-serif}
#app{display:flex;height:100%;width:100%}
#sidebar{width:420px;background:var(--panel-bg);border-right:1px solid var(--panel-border);display:flex;flex-direction:column}
#sidebar header{padding:14px 16px;border-bottom:1px solid var(--panel-border)}
#sidebar header h2{margin:0;font-size:18px;color:var(--text)}
#sidebar header .meta{margin-top:6px;font-size:12px;color:#9aa3b2;transition:color .15s ease}
#controls{padding:10px 16px;border-bottom:1px solid var(--panel-border);display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
button,select,textarea,input{background:var(--panel-card);color:var(--text);border:1px solid var(--panel-border);border-radius:10px;padding:8px;outline:none}
button:hover{background:rgba(255,255,255,0.04)}
.mode-active{outline:2px solid #3b82f6}
#lists{overflow:auto;padding:12px;display:flex;flex-direction:column;gap:16px}
.group h3{margin:0 0 10px 0;font-size:14px;color:var(--text);opacity:.75}
.card{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;background:var(--panel-card);border:1px solid var(--panel-border)}
.card img{width:44px;height:44px;image-rendering:-webkit-optimize-contrast}
.card .title{font-size:13px;color:var(--text)}
#canvasWrap{flex:1 1 0;position:relative;overflow:hidden;background:radial-gradient(ellipse at center,var(--bg1) 0%,var(--bg2) 70%)}
.legend{position:absolute;left:16px;top:16px;background:rgba(0,0,0,.35);border:1px solid var(--panel-border);border-radius:10px;padding:8px 10px;font-size:12px;z-index:2}
svg{width:100%;height:100%;background:transparent}
.edge{transition:opacity .2s,stroke-width .2s;opacity:.75}
.edge.force{stroke:#28a745}
.edge.weak{stroke:#dc3545}
.edge, .edge-hit{pointer-events:stroke;cursor:pointer}
.edge-hit{stroke-width:18;stroke-opacity:0}
.dim{opacity:.12}
.highlight{opacity:.95!important;stroke-width:4!important}
.hint-green{color:var(--accent-green)!important}
.hint-red{color:var(--accent-red)!important}
.hint-idle{color:#9aa3b2!important}
.inline{display:flex;align-items:center;gap:8px}
#exportArea{grid-column:1/3;min-height:70px}

/* interactive attributes */
.checks{ display:flex; flex-wrap:wrap; gap:8px; margin-left:auto; }
.card{ align-items:center; }
.card .title{ flex:0 0 auto; }
.check{ display:inline-flex; align-items:center; gap:6px; font-size:12px; padding:4px 6px; border-radius:8px; background:var(--panel-card); border:1px solid var(--panel-border); color:var(--text);}
.check input{ transform:translateY(0.5px); }

.center-logo{pointer-events:none;image-rendering:-webkit-optimize-contrast}

/* label badges for better readability */
.label-wrap{ pointer-events:auto; opacity:0; visibility:hidden; transition:opacity .12s ease; }
.label-bg{ fill:rgba(0,0,0,.45); stroke:var(--panel-border); stroke-width:1; rx:8; ry:8 }
.label{ font-size:16px; fill:var(--text) }

.check span{ color:var(--text); }

.label-wrap.show{ opacity:1; visibility:visible; }

.note{ width:100%; min-height:56px; resize:vertical; background:var(--panel-card); color:var(--text); border:1px solid var(--panel-border); border-radius:10px; padding:6px 8px; }
.card{ flex-wrap:wrap; gap:10px; }
.card .checks{ margin-left:0; }

.edge.highlight{opacity:.95!important;stroke-width:16!important}

.big-note{ width:100%; min-height:90px; resize:vertical; background:var(--panel-card); color:var(--text);
  border:1px solid var(--panel-border); border-radius:12px; padding:8px 10px; }

#sidebar .title-green{ color: var(--accent-green, #28a745); }

#sidebar .title-red{ color: var(--accent-red, #dc3545); }

@media (prefers-color-scheme: dark){
  #sidebar .title-green, #sidebar .title-red{ text-shadow: 0 0 0.5px rgba(0,0,0,.25); }
}


/* Inline note field inside relation cards */
.rel-note{
  width: 100%;
  box-sizing: border-box;
  resize: vertical;
  min-height: 28px;
  max-height: 120px;
  margin-top: .35rem;
  padding: .4rem .5rem;
  border-radius: .5rem;
  border: 1px solid var(--panel-border, #222638);
  background: var(--panel-bg, #161a22);
  color: var(--text, #e6e6e6);
  outline: none;
}
.rel-note::placeholder{ opacity:.6; }
.rel-card .rel-note{ margin-left: 36px; } /* indent under icon/name if present */


/* Repeating chevrons along edges (direction indicator) */
g.edge-chevrons{ pointer-events: none; }
.edge + g.edge-chevrons { opacity: .95; }
.edge.dim + g.edge-chevrons { opacity: .25; filter: grayscale(0.6); }
.edge.highlight + g.edge-chevrons { opacity: 1; filter: none; }


/* Brighter chevrons visibility */
g.edge-chevrons{ pointer-events:none; }
.edge + g.edge-chevrons{ opacity:1; filter: drop-shadow(0 0 1px rgba(255,255,255,.7)); }
.edge.dim + g.edge-chevrons{ opacity:.35; filter: grayscale(.6) drop-shadow(0 0 0 rgba(0,0,0,0)); }
@media (prefers-color-scheme: dark){
  g.edge-chevrons{ mix-blend-mode: screen; }
}


    /* Pale base edges so chevrons stand out */
    .edge{ stroke-opacity:.35; }
    .edge.highlight{ stroke-opacity:.55; }
    .edge.dim{ stroke-opacity:.18; }
    

/* Single add-button mode: hide red button gracefully */
.btn-red, button.btn-red { display:none !important; }

/* Optional: show active state on add button */
.btn-add-active, .btn-add-active:focus{
  outline: 2px solid var(--accent-green, #28a745);
  box-shadow: 0 0 0 .15rem rgba(40,167,69,.25);
}


/* Color connected edges relative to selected node */
.edge.edge-outgoing{ stroke: var(--accent-green, #28a745) !important; }
.edge.edge-incoming{ stroke: var(--accent-red,   #dc3545) !important; }
